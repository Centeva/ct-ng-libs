angular.module("centeva-ng-libs.referenceInterceptor",[]).factory("referenceInterceptor",function(){function a(a){function b(a){var d=angular.isObject(a);if(angular.isArray(a))for(var e=0;e<a.length;e++)a[e]=b(a[e]);else if(d){angular.isDefined(a.$id)&&(c[a.$id]=a);for(var f in a)a.hasOwnProperty(f)&&(a[f]=b(a[f],a))}return d&&angular.isDefined(a.$ref)&&angular.isDefined(c[a.$ref])?c[a.$ref]:a}var c=[];return b(a,null),a}function b(a,d,e){var f=angular.isObject(a),g=d;if(f&&angular.isDefined(a.$id)){if(c(d,a.$id))return e?b(angular.copy(a),[d[d.length-1]],!1):{$ref:a.$id};g=angular.copy(d),g.push(a.$id)}if(angular.isArray(a))for(var h=0;h<a.length;h++)a[h]=b(a[h],g,!0);else if(f)for(var i in a)a.hasOwnProperty(i)&&(a[i]=b(a[i],g,!1));return a}function c(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}return{response:function(c){return console.time("referenceInterceptor"),a(c),b(c,[]),console.timeEnd("referenceInterceptor"),c}}}).config(["$httpProvider",function(a){a.interceptors.push("referenceInterceptor")}]);